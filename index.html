<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>可交互的圆形按钮组</title>
    <style>
        /* 通用重置样式，清除默认边距和盒模型设置 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* 主体样式：使用Flex布局居中容器，设置渐变背景 */
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px;
        }
        
        /* 主容器样式，设置相对定位作为子元素的定位参考 */
        .container {
            position: relative;
            width: 600px;
            height: 500px;
        }
        
        /* 圆形节点基础样式 */
        .circle {
            width: 80px;
            height: 80px;
            background-color: #87ceeb; /* 天空蓝色 */
            border-radius: 50%; /* 圆形 */
            position: absolute; /* 绝对定位 */
            display: flex;
            justify-content: center;
            align-items: center;
            color: #2c3e50; /* 深蓝色文字 */
            font-size: 16px;
            font-weight: 600;
            cursor: pointer; /* 鼠标指针变为手型 */
            transition: all 0.3s ease; /* 平滑过渡效果 */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1); /* 轻微阴影 */
            user-select: none; /* 禁止文本选择 */
            z-index: 10; /* 确保圆形位于连接线上方 */
        }
        
        /* 圆形节点的悬停效果 */
        .circle:hover {
            transform: scale(1.1); /* 放大10% */
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15); /* 增强阴影 */
        }
        
        /* 激活状态下的圆形节点样式 */
        .circle.bordered {
            border: 3px solid #2c3e50;
            background-color: #76c4e3; /* 稍深的蓝色 */
        }
        
        /* 各个圆形节点的具体位置 */
        #circle1 {
            top: 50px;
            left: 250px; /* 中心节点 */
        }
        
        #circle2 {
            top: 200px;
            left: 100px; /* 左侧节点 */
        }
        
        #circle3 {
            top: 200px;
            left: 400px; /* 右侧节点 */
        }
        
        #circle4 {
            top: 350px;
            left: 250px; /* 底部节点 */
        }
        
        /* SVG连接线容器 */
        .connector {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 5; /* 位于圆形节点下方 */
        }
        
        /* 连接线样式 */
        .connection {
            stroke: #000; /* 黑色线条 */
            stroke-width: 2;
            transition: all 0.3s ease; /* 平滑过渡效果 */
        }
        
        /* 激活状态下的连接线样式 */
        .connection.active {
            stroke: #87ceeb; /* 天空蓝色 */
            stroke-width: 3; /* 加粗线条 */
        }
        
        /* 箭头标记样式 */
        .arrowhead polygon {
            fill: #000; /* 黑色填充 */
            transition: all 0.3s ease; /* 平滑过渡效果 */
        }
        
        /* 激活状态下的箭头样式 */
        .arrowhead.active polygon {
            fill: #87ceeb; /* 天空蓝色填充 */
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 圆形按钮节点 -->
        <div class="circle" id="circle1">中心节点</div>
        <div class="circle" id="circle2">节点 A</div>
        <div class="circle" id="circle3">节点 B</div>
        <div class="circle" id="circle4">节点 C</div>
        
        <!-- SVG连接线容器 -->
        <svg class="connector" id="connector">
            <!-- 定义箭头标记，用于线段的终点 -->
            <defs>
                <marker id="arrowhead1" class="arrowhead" markerWidth="10" markerHeight="7" 
                refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" />
                </marker>
                <marker id="arrowhead2" class="arrowhead" markerWidth="10" markerHeight="7" 
                refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" />
                </marker>
                <marker id="arrowhead3" class="arrowhead" markerWidth="10" markerHeight="7" 
                refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" />
                </marker>
            </defs>
            
            <!-- 具体的连接线段，使用不同的箭头标记 -->
            <line id="line1-2" class="connection" x1="290" y1="90" x2="140" y2="200" marker-end="url(#arrowhead1)"></line>
            <line id="line1-3" class="connection" x1="310" y1="90" x2="440" y2="200" marker-end="url(#arrowhead2)"></line>
            <line id="line1-4" class="connection" x1="290" y1="130" x2="290" y2="350" marker-end="url(#arrowhead3)"></line>
        </svg>
    </div>

    <script>
        // 获取所有圆形元素
        const circles = document.querySelectorAll('.circle');
        // 获取所有连接线元素
        const connections = document.querySelectorAll('.connection');
        // 获取所有箭头标记元素
        const arrowheads = document.querySelectorAll('.arrowhead');
        
        // 定义节点之间的连接关系（图结构）
        const connectionsMap = {
            'circle1': ['circle2', 'circle3', 'circle4'], // 中心节点连接到所有其他节点
            'circle2': ['circle1'], // 节点A只连接回中心节点
            'circle3': ['circle1'], // 节点B只连接回中心节点
            'circle4': ['circle1']  // 节点C只连接回中心节点
        };
        
        // 存储当前激活的节点ID
        let activeCircle = null;
        
        // 为每个圆形添加点击事件监听器
        circles.forEach(circle => {
            circle.addEventListener('click', function() {
                // 获取当前圆形的ID
                const circleId = this.id;
                
                // 如果点击的是已激活的节点，则取消激活所有节点
                if (activeCircle === circleId) {
                    // 重置所有圆形和连接线的样式
                    circles.forEach(c => c.classList.remove('bordered'));
                    connections.forEach(conn => conn.classList.remove('active'));
                    arrowheads.forEach(arrow => arrow.classList.remove('active'));
                    activeCircle = null;
                    return;
                }
                
                // 更新激活节点为当前点击的节点
                activeCircle = circleId;
                
                // 重置所有圆形和连接线的样式
                circles.forEach(c => c.classList.remove('bordered'));
                connections.forEach(conn => conn.classList.remove('active'));
                arrowheads.forEach(arrow => arrow.classList.remove('active'));
                
                // 激活当前圆形（添加边框样式）
                this.classList.add('bordered');
                
                // 激活所有相连的圆形
                connectionsMap[circleId].forEach(connectedCircleId => {
                    // 为相连的节点添加边框样式
                    document.getElementById(connectedCircleId).classList.add('bordered');
                    
                    // 构建连接线ID（两种可能的命名方式）
                    const connectionId = `line${circleId.slice(-1)}-${connectedCircleId.slice(-1)}`;
                    const reverseConnectionId = `line${connectedCircleId.slice(-1)}-${circleId.slice(-1)}`;
                    
                    // 查找对应的连接线元素
                    let connectionLine = null;
                    if (document.getElementById(connectionId)) {
                        connectionLine = document.getElementById(connectionId);
                    } else if (document.getElementById(reverseConnectionId)) {
                        connectionLine = document.getElementById(reverseConnectionId);
                    }
                    
                    // 如果找到连接线，激活它和对应的箭头
                    if (connectionLine) {
                        connectionLine.classList.add('active');
                        
                        // 获取对应的箭头ID并激活
                        const markerUrl = connectionLine.getAttribute('marker-end');
                        const markerId = markerUrl.replace('url(#', '').replace(')', '');
                        document.getElementById(markerId).classList.add('active');
                    }
                });
            });
        });
    </script>
</body>
</html>
